"use strict";(self.webpackChunkpicsta=self.webpackChunkpicsta||[]).push([[615],{75615:function(e,s,a){a.r(s),a.d(s,{default:function(){return P}});var r=a(15861),n=a(64687),i=a.n(n),t=a(6473),l=a(34032),d=a(47313),o=a(97890),u=a(75627),c=a(1432),m=a(9019),x=a(73428),p=a(61113),f=a(57829),h=a(35898),v=a(51406),w=a(54285),j=a(76221),g=a(24244),Z=a(52643),b=a(48175),S=a(5279),N=a(46417);function P(){var e=(0,l.Ds)().enqueueSnackbar,s=(0,o.s0)(),a=(0,w.Z)().user,n=t.Ry().shape({fullName:t.Z_().required("Full name is required"),userName:t.Z_().required("User name is required"),email:t.Z_().required("email is required"),avatar:t.nK().optional()}),P={avatar:(null===a||void 0===a?void 0:a.avatarUrl)||null,fullName:(null===a||void 0===a?void 0:a.fullName)||"",userName:(null===a||void 0===a?void 0:a.userName)||"",email:(null===a||void 0===a?void 0:a.email)||""},y=(0,u.cI)({resolver:(0,c.X)(n),defaultValues:P}),q=y.getValues,C=y.setValue,k=y.handleSubmit,z=y.formState.isSubmitting,U=function(){var a=(0,r.Z)(i().mark((function a(){var r,n;return i().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=q(),console.log(r),(n=new FormData).append("avatar",r.avatar),n.append("fullName",r.fullName),n.append("email",r.email),console.log(n.values()),(0,Z.Nq)(n).then((function(){e("Update user info success!"),s(b.v.root,{replace:!0})})).catch((function(s){e(s.toString(),{variant:"error"})}));case 8:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),V=t.Ry().shape({oldPassword:t.Z_().required("Current password is required"),newPassword:t.Z_().required("New password is required"),confirmNewPassword:t.Z_().required("Confirm password is required")}),R={oldPassword:(null===a||void 0===a?void 0:a.oldPassword)||"",newPassword:(null===a||void 0===a?void 0:a.newPassword)||"",confirmNewPassword:(null===a||void 0===a?void 0:a.confirmNewPassword)||""},_=(0,u.cI)({resolver:(0,c.X)(V),defaultValues:R}),F=_.getValues,I=_.handleSubmit,A=_.formState.isSubmitting,D=function(){var a=(0,r.Z)(i().mark((function a(){var r;return i().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=F(),(0,S.Cp)(r).then((function(){e("Update password success!"),s(b.v.root,{replace:!0})})).catch((function(s){e(s.toString(),{variant:"error"})}));case 2:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),T=(0,d.useCallback)((function(e){var s=e[0];if(s){C("avatar",Object.assign(s,{preview:URL.createObjectURL(s)}));q()}}),[C]);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(g.RV,{methods:y,onSubmit:k(U),children:(0,N.jsxs)(m.ZP,{container:!0,spacing:3,children:[(0,N.jsx)(m.ZP,{item:!0,xs:12,md:4,children:(0,N.jsx)(x.Z,{sx:{py:10,px:3,textAlign:"center"},children:(0,N.jsx)(g.sX,{name:"avatar",accept:"image/*",maxSize:3145728,onDrop:T,helperText:(0,N.jsxs)(p.Z,{variant:"caption",sx:{mt:2,mx:"auto",display:"block",textAlign:"center",color:"text.secondary"},children:["Allowed *.jpeg, *.jpg, *.png, *.gif",(0,N.jsx)("br",{})," max size of ",(0,j.oe)(3145728)]})})})}),(0,N.jsx)(m.ZP,{item:!0,xs:12,md:8,children:(0,N.jsxs)(x.Z,{style:{height:"100%"},sx:{p:3},children:[(0,N.jsxs)(f.Z,{sx:{display:"grid",rowGap:3,gridTemplateColumns:"1fr"},children:[(0,N.jsxs)("div",{children:[(0,N.jsx)(p.Z,{sx:{fontSize:"default",m:1},children:"Full name"}),(0,N.jsx)("div",{children:(0,N.jsx)(g.au,{name:"fullName",label:"Full name"})})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)(p.Z,{sx:{fontSize:"default",m:1},children:"User name"}),(0,N.jsx)(g.au,{disabled:!0,name:"userName",label:"User name"})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)(p.Z,{sx:{fontSize:"default",m:1},children:"Email"}),(0,N.jsx)(g.au,{name:"email",label:"Email"})]})]}),(0,N.jsx)(h.Z,{spacing:3,alignItems:"flex-start",sx:{mt:3},children:(0,N.jsx)(v.Z,{type:"submit",variant:"contained",loading:z,children:"Save Changes"})})]})})]})}),(0,N.jsx)("div",{style:{marginTop:50},children:(0,N.jsx)(g.RV,{methods:_,onSubmit:I(D),children:(0,N.jsxs)(m.ZP,{container:!0,spacing:3,children:[(0,N.jsx)(m.ZP,{item:!0,xs:12,md:4}),(0,N.jsx)(m.ZP,{item:!0,xs:12,md:8,children:(0,N.jsxs)(x.Z,{sx:{p:3},children:[(0,N.jsxs)(f.Z,{sx:{"& > div":{marginBottom:2}},children:[(0,N.jsx)(p.Z,{sx:{fontSize:24,fontWeight:600,mb:5},children:"Change password"}),(0,N.jsxs)("div",{children:[(0,N.jsx)(p.Z,{sx:{fontSize:"default",m:1},children:"Current password"}),(0,N.jsx)(g.au,{type:"password",name:"oldPassword",label:"Current password"})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)(p.Z,{sx:{fontSize:"default",m:1},children:"New password"}),(0,N.jsx)(g.au,{type:"password",name:"newPassword",label:"New password"})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)(p.Z,{sx:{fontSize:"default",m:1},children:"Confirm password"}),(0,N.jsx)(g.au,{type:"password",name:"confirmNewPassword",label:"Confirm password"})]})]}),(0,N.jsx)(h.Z,{spacing:3,alignItems:"flex-start",sx:{mt:3},children:(0,N.jsx)(v.Z,{type:"submit",variant:"contained",loading:A,children:"Change password"})})]})})]})})})]})}}}]);